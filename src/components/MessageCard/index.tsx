import React, { useState } from "react";
import styles from "./index.module.scss";
import Basic from "./CardContent/basic";
import Email from "./CardContent/email";
import Phone from "./CardContent/phone";
import Position from "./CardContent/position";
import data from "../../profileconfig.json";

interface CardProps {
  className?: string;
}

const Card: React.FC<CardProps> = (className) => {
  const [rotationY, setRotationY] = useState<number>(0);
  const [rotationX, setRotationX] = useState<number>(0);
  const [opacityIndex, setOpacityIndex] = useState<string>("basic");
  const multiple = 300;

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    const box = e.currentTarget.getBoundingClientRect();
    const calcY = (e.clientX - box.x - box.width / 2) / multiple;
    const calcX = -(e.clientY - box.y - box.height / 2) / multiple;

    setRotationX(calcX);
    setRotationY(calcY);
  };

  const handleMouseLeave = () => {
    setRotationX(0);
    setRotationY(0);
  };

  const handleClick = (value: string) => {
    setOpacityIndex(value);
  };
  return (
    <>
      <div
        className={`${styles["card-container"]} ${className}`}
        onMouseMove={handleMouseMove}
        onMouseLeave={handleMouseLeave}
      >
        <div
          className={styles.card}
          style={{
            transform: `rotateX(${rotationX}deg) rotateY(${rotationY}deg)`,
          }}
        >
          <div className={styles["nav-container"]}>
            <div
              className={styles["nav-item"]}
              onClick={() => handleClick("basic")}
            >
              <svg
                className="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="7450"
              >
                <path
                  d="M512 73.142857c242.371048 0 438.857143 196.486095 438.857143 438.857143 0 152.210286-77.507048 286.329905-195.193905 365.056l-0.804571 0.658286A437.76 437.76 0 0 1 512 950.857143a436.809143 436.809143 0 0 1-242.809905-73.240381l-0.853333-0.560762C150.649905 798.329905 73.142857 664.210286 73.142857 512c0-242.371048 196.486095-438.857143 438.857143-438.857143z m0 73.142857C310.02819 146.285714 146.285714 310.02819 146.285714 512c0 100.010667 40.131048 190.659048 105.20381 256.658286l123.026286-152.795429a242.614857 242.614857 0 0 0 77.33638 34.937905l-136.533333 169.569524A364.007619 364.007619 0 0 0 512 877.714286c72.411429 0 139.897905-21.040762 196.705524-57.344l-136.533334-169.569524a242.614857 242.614857 0 0 0 77.28762-34.937905l123.050666 152.795429A364.544 364.544 0 0 0 877.714286 512c0-201.97181-163.742476-365.714286-365.714286-365.714286z m0 73.142857a195.047619 195.047619 0 1 1 0 390.095239 195.047619 195.047619 0 0 1 0-390.095239z m0 81.017905a114.029714 114.029714 0 1 0 0 228.059429 114.029714 114.029714 0 0 0 0-228.059429z"
                  p-id="7451"
                ></path>
              </svg>
            </div>
            <div
              className={styles["nav-item"]}
              onClick={() => handleClick("email")}
            >
              <svg
                className="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="7781"
                id="mx_n_1708405207928"
              >
                <path
                  d="M926.47619 355.644952V780.190476a73.142857 73.142857 0 0 1-73.142857 73.142857H170.666667a73.142857 73.142857 0 0 1-73.142857-73.142857V355.644952l73.142857 62.000762V780.190476h682.666666V417.645714l73.142857-62.000762zM853.333333 170.666667a74.044952 74.044952 0 0 1 26.087619 4.778666 72.704 72.704 0 0 1 30.622477 22.186667 73.508571 73.508571 0 0 1 10.678857 17.67619c3.169524 7.509333 5.12 15.652571 5.607619 24.210286L926.47619 243.809524v24.380952L559.469714 581.241905a73.142857 73.142857 0 0 1-91.306666 2.901333l-3.632762-2.925714L97.52381 268.190476v-24.380952a72.899048 72.899048 0 0 1 40.155428-65.292191A72.97219 72.97219 0 0 1 170.666667 170.666667h682.666666z m-10.971428 73.142857H181.638095L512 525.58019 842.361905 243.809524z"
                  p-id="7782"
                ></path>
              </svg>
            </div>

            <div
              className={styles["nav-item"]}
              onClick={() => handleClick("phone")}
            >
              <svg
                className="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="7912"
              >
                <path
                  d="M446.756571 194.706286c33.792 52.882286 47.055238 90.307048 35.596191 136.655238-5.948952 24.405333-18.236952 40.033524-40.569905 58.709333l-22.991238 18.748953-2.779429 2.194285-15.36 11.580953c-10.410667 8.045714-14.482286 12.55619-15.262476 15.311238-4.681143 16.579048 3.218286 38.497524 22.016 67.876571 31.256381 48.615619 67.779048 89.941333 112.396191 126.122667 30.134857 24.478476 47.786667 33.718857 60.147809 31.256381 9.752381-1.950476 17.212952-7.68 34.450286-26.258286l7.021714-7.484952c26.843429-28.135619 45.494857-40.789333 77.238857-45.568 45.29981-6.802286 79.725714 7.94819 119.369143 40.71619l11.800381 10.069333 12.239238 10.72762 25.721905 21.504c40.667429 34.791619 61.488762 64.804571 58.416762 106.203428-2.31619 30.110476-15.872 48.176762-43.715048 72.094476l-6.314666 5.412572a288.914286 288.914286 0 0 0-5.022476 4.486095l-16.091429 14.969905-8.484571 7.753143a187.733333 187.733333 0 0 1-22.747429 17.627428c-47.079619 30.524952-103.984762 45.031619-167.643429 43.081143-55.02781-1.706667-101.010286-16.798476-156.330666-46.08-74.99581-39.716571-138.118095-93.817905-209.676191-173.641143-68.144762-75.971048-118.930286-154.819048-147.626666-236.836571-40.155429-114.834286-20.72381-237.372952 49.200761-316.537905 5.729524-6.509714 9.99619-10.727619 18.895239-18.285714l25.404952-21.089524 12.434286-10.922667c19.065905-16.481524 32.134095-24.30781 52.809143-28.184381 48.713143-9.142857 82.895238 15.701333 117.418666 64.902095l6.509714 9.581715 5.851429 8.923428 15.676952 24.380953z m-86.552381 166.741333l12.921905-9.752381 5.802667-4.827428 15.603809-12.629334c11.166476-9.337905 15.433143-14.726095 16.822858-20.333714 4.87619-19.846095-1.682286-40.252952-22.430477-73.776762l-3.803428-6.046476-23.137524-35.669334c-20.796952-30.695619-35.181714-41.862095-47.201524-39.594666-4.315429 0.804571-8.411429 3.145143-16.530286 9.971809l-14.945523 13.068191-20.821334 17.237333c-7.801905 6.509714-11.385905 9.801143-14.531047 13.165714l-5.778286 6.753524c-48.128 58.904381-61.366857 150.674286-30.573714 238.762667 25.136762 71.850667 70.851048 142.848 133.046857 212.163048 66.31619 73.97181 123.270095 122.806857 189.44 157.842285 46.275048 24.502857 82.236952 36.303238 124.342857 37.595429 49.298286 1.536 91.526095-9.264762 125.635048-31.353905 4.193524-2.706286 8.728381-6.290286 14.482285-11.410286l3.608381-3.242666 19.992381-18.627048 6.192762-5.485714 6.485333-5.558857c14.019048-12.04419 18.066286-17.456762 18.432-22.113524 0.731429-9.898667-7.728762-22.77181-28.672-41.350095l-4.36419-3.803429c-4.071619-3.486476-20.577524-17.091048-24.405333-20.382476l-18.041905-15.774476-6.680381-5.607619c-24.697905-20.358095-41.642667-27.477333-61.561905-24.478477-11.50781 1.706667-19.480381 7.143619-35.986286 24.551619l-10.556952 11.264c-24.380952 25.575619-40.911238 37.302857-68.656762 42.861715-42.349714 8.484571-73.313524-7.728762-120.612571-46.177524-50.761143-41.155048-92.452571-88.33219-127.902476-143.433143-29.525333-46.201905-43.081143-83.748571-30.841905-127.171048 6.582857-23.527619 19.894857-37.64419 45.226666-56.636952z"
                  p-id="7913"
                ></path>
              </svg>
            </div>

            <div
              className={styles["nav-item"]}
              onClick={() => handleClick("position")}
            >
              <svg
                className="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="8247"
                id="mx_n_1708405333592"
              >
                <path
                  d="M549.61981 133.022476l319.683047 203.605334A70.851048 70.851048 0 0 1 902.095238 396.361143v434.883047A70.89981 70.89981 0 0 1 831.146667 902.095238h-282.819048l0.024381-218.112h-71.826286v218.087619L192.853333 902.095238A70.89981 70.89981 0 0 1 121.904762 831.24419V390.241524c0-24.527238 12.678095-47.299048 33.54819-60.220953l318.659048-197.485714a70.972952 70.972952 0 0 1 75.50781 0.487619zM828.952381 828.952381V397.214476L511.488 195.047619 195.047619 391.119238V828.952381h211.309714v-216.551619h212.187429v216.527238L828.952381 828.952381z"
                  p-id="8248"
                ></path>
              </svg>
            </div>
          </div>
          <div className={styles.avatar}>
            <img src={data.avatar} alt="avatar"></img>
          </div>
          <div className={styles["content-container"]}>
            <div
              style={{ opacity: `${opacityIndex === "basic" ? 1 : 0}` }}
              className={styles["content-item"]}
            >
              <Basic></Basic>
            </div>
            <div
              style={{ opacity: `${opacityIndex === "email" ? 1 : 0}` }}
              className={styles["content-item"]}
            >
              <Email></Email>
            </div>
            <div
              style={{ opacity: `${opacityIndex === "phone" ? 1 : 0}` }}
              className={styles["content-item"]}
            >
              <Phone></Phone>
            </div>
            <div
              style={{ opacity: `${opacityIndex === "position" ? 1 : 0}` }}
              className={styles["content-item"]}
            >
              <Position></Position>
            </div>
          </div>
        </div>
      </div>
    </>
  );
};

export default Card;
